<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MAS340</title>
<script src="Scripts/jquery-3.3.1.js"></script>
<link href="Scripts/styles.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<script src="Scripts/jquery.js"></script>
<script src="Scripts/jquery-ui.js"></script>
<script>
$(document).ready(function(){
	$('#char').css('transform','scale(1.5)');
	$('#char').css({left: -200, top: 475});
	$('#background').addClass('bg5');
	$('#talkbutton').show().css({left: 850, top: 150});
		checkInventory();
QuestMemory();
QuestCompletionMemory();
	QuestCompletionMemory();
	CheckTownTime(0,0);
	// setup
	$('#char').animate({left: 100, top: 450},750);
	//$('#char').animate({left: -200, top: 475},750); // when finished with conversation
	$('#talkbutton').click(function() {
		$('#talkbutton').hide();
		var progress = 0;
		var dialogue;
		var character;
		eventHandler();
			function eventHandler() {
				if (localStorage.getItem('Acorns') == 'true' && CheckTownTime(0,0) == true) {
					switch (progress) {					
						case 0:
							$('#nextbutton, #textbox ').show();
							character = 'King';
							dialogue = "Looks nice and fresh there peasant";
							break;
						case 1:
						character = 'King';
							dialogue = "So yeah, now that you've brought me my beloved acorns, I'll go to your king's party"
							break;
						case 2:
						character = 'This guy';
							dialogue = "thx"
							if (QuestComp[3] == false) {
								QuestToggler(3, true);
									if ($('#QuestButton2').hasClass('jiggle') == true) {
									$('#QuestButton2').removeClass('jiggle');
								}
								$('#QuestButton2').addClass('jiggle');
							}
							break;		
							
						case 3:		
						$('#nextbutton, #textbox ').hide();	
						break;
					}					
						progress++;  
						localStorage.setItem("DialogueProgress", progress);
												$('#textbox #span2').html(dialogue);	
						$('#textbox #span1').html(character);
				} else if (localStorage.getItem('Acorns') == 'true' && CheckTownTime(0,0) == false) {
										switch (progress) {					
						case 0:
							$('#nextbutton, #textbox ').show();
							character = 'King';
							dialogue = "Looks like you have what I need there";
							break;
						case 1:
						character = 'King';
							dialogue = "But I am tired. Come back at night"
							break;
						case 2:
						character = 'This guy';
							dialogue = "goddddamn"
							break;		
							
						case 3:		
						$('#nextbutton, #textbox ').hide();	
						break;
					}					
						progress++;  
						localStorage.setItem("DialogueProgress", progress);
												$('#textbox #span2').html(dialogue);	
						$('#textbox #span1').html(character);
				} else if (CheckTownTime(0,0) == true) {
					switch (progress) {
						case 0:
							$('#nextbutton, #textbox ').show();
							character = 'King';
							dialogue = "Hi, welcome to my kingdoms";
							break;
						case 1:
						character = 'King';
							dialogue = "Party? aw yeah I love parties"
							break;
						case 2:
						character = 'King';
							dialogue = "I'll rock up if you get me some acorns from the nearby forest"
							break;
						case 3:
						character = 'This guy';
							dialogue = "Okay you weirdo"
							if (QuestDict[3][1] == false) {
								QuestToggler('Q4', true);
								console.log(QuestDict);
																if ($('#QuestButton2').hasClass('jiggle') == true) {
									$('#QuestButton2').removeClass('jiggle');
								}
								$('#QuestButton2').addClass('jiggle');
							}
							break;		
						case 4:
							$('#nextbutton, #textbox ').hide();			
							break;	
					}
					progress++;  
					localStorage.setItem("DialogueProgress", progress);
											$('#textbox #span2').html(dialogue);	
						$('#textbox #span1').html(character);	
				} else if (CheckTownTime(0,0) == false) {					
							switch (progress) {
						case 0:
							$('#nextbutton, #textbox ').show();
							character = 'King';
							dialogue = "Hi, welcome to my kingdoms";
							break;
						case 1:
						character = 'King';
							dialogue = "Invitation?"
							break;
						case 2:
						character = 'King';
							dialogue = "Sorry I am busy right now. Come back later at night when I am free"
							break;
						case 3:
						character = 'this guy';
							dialogue = "tch"

							break;		
						case 4:
							$('#nextbutton, #textbox ').hide();			
							break;	
					}
					progress++;  
					localStorage.setItem("DialogueProgress", progress);
											$('#textbox #span2').html(dialogue);	
						$('#textbox #span1').html(character); 	
					};
			}
		$('#nextbutton').click(eventHandler);		
	});
});

</script>

</head>
<body>
<div id="background">
	<button onclick="goBack()">Go Back</button>
	<div id="char"></div>
		<div id="talkbutton"><span>Chat</span></div>
		<div id="textbox">
			<span id='span1'></span>
			<span id='span2'></span>
		</div>
		<div id="nextbutton"><span>Continue</span></div>
				<div id="QuestButton2"><a class="htmllink" href="questList.html"><span>Quest List</span></a></div>
</div>
</body>
</html>