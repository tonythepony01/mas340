<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MAS340</title>
<script src="Scripts/jquery-3.3.1.js"></script>
<link href="Scripts/styles.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<script src="Scripts/jquery.js"></script>
<script src="Scripts/jquery-ui.js"></script>
<script>
$(document).ready(function(){
$('button,#QuestButton2, #nextbutton, #textbox').fadeOut(0);
	QuestMemory();
	$('#char-2').css({left: -300, top: 175});
	$('#background').addClass('bg5');
								 $('#background').css({
								'filter':'brightness(0)',
								'webkitFilter':'brightness(0)',
								'transition':'all 0s ease-out',
								'-webkit-transition':'all 0s ease-out',
							});
	$('#talkbutton').show().css({left: 850, top: 150});
	// setup
	$('#char-2').animate({left: -100, top: 175},750);
		if (localStorage.getItem('DialogueProgress') != "undefined" && localStorage.getItem('DialogueProgress') != null && localStorage.getItem('DialogueProgress') != 0) {
		var progress = localStorage.getItem('DialogueProgress') /*Dialogue progress saver*/
		progress -= 1;
		eventHandler();	
		console.log('yey'+ progress)
		$('#nextbutton, #textbox').fadeIn(700);
	} else {
		var progress = 0;
		eventHandler();	
		$('#nextbutton, #textbox').fadeIn(700);
	}
		var dialogue;
		var character;
		function eventHandler() {
			switch (progress) {
				case 0:
												 $('#background').css({
								'filter':'brightness(1)',
								'webkitFilter':'brightness(1)',
								'transition':'all 1s ease-out',
								'-webkit-transition':'all 1s ease-out',
							});
					character = 'Max'
					dialogue = "You summoned me, your majesty.";
					break;
				case 1:
					character = 'King'
					dialogue = "Ahh yes, young Max";
					break;
				case 2:
					character = 'King'
					dialogue = "-ine";
					break;
				case 3:
					character = 'Max'
					dialogue = "Just Max, your majesty.";
					break;		
				case 4:
					character = 'King'
					dialogue = "Max, right.";
					break;	
				case 5:
					character = 'King'
					dialogue = "Anyway, the reason I have called you here is because I have a task for you.";
					break;	
				case 6:
					character = 'Max'
					dialogue = "Task?";
					break;
				case 7:
					character = 'King'
					dialogue = "As you may know, it is my 80th birthday soon, and I plan to hold a feast in the palace ";
					break;
				case 8:
					character = 'King'
					dialogue = "I dun have friends, so I would like you to go to the neighbouring lands and invite the Dukes to attend.";
					break;
			}
			progress++;  
			localStorage.setItem("DialogueProgress", progress);
					$('#textbox #span2').html(dialogue);	
					$('#textbox #span1').html(character);	
		}
		$('#nextbutton').click(eventHandler);		
});

</script>

</head>
<body>
<div id="background">
	<button onclick="goBack()">Go Back</button>
	<div id="char-2"></div>
		<div id="talkbutton"><span>Chat</span></div>
		<div id="textbox">
			<span id='span1'></span>
			<span id='span2'></span>
		</div>
		<div id="nextbutton"><span>Continue</span></div>
</div>
</body>
</html>