<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MAS340</title>
<script src="Scripts/jquery-3.3.1.js"></script>
<link href="Scripts/styles.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<script src="Scripts/jquery.js"></script>
<script src="Scripts/jquery-ui.js"></script>
<script>
$(document).ready(function(){
	$('#background').addClass('bg27').css({
		'filter':'brightness(0)',
		'webkitFilter':'brightness(0)',
		'transition':'all 0s ease-out',
		'-webkit-transition':'all 0s ease-out',
	});
	$('#talkbutton').show().css({left: 850, top: 150});
	QuestMemory();
	QuestCompletionMemory();
	if (localStorage.getItem('DialogueProgress') != "undefined" && localStorage.getItem('DialogueProgress') != null && localStorage.getItem('DialogueProgress') != 0) {
		var progress = localStorage.getItem('DialogueProgress') /*Dialogue progress saver*/
		progress -= 1;
		eventHandler();	
		console.log('yey'+ progress)
	} else {
		var progress = 0;
		eventHandler();	
	}
		var dialogue;
		var character;
		function eventHandler() {
			switch (progress) {
				case 0:
					$('#nextbutton, #textbox ').show();
					$('#background').css({
						'filter':'brightness(1)',
						'webkitFilter':'brightness(1)',
						'transition':'all 2s ease-out',
						'-webkit-transition':'all 2s ease-out',
					});
					character = '???';
					dialogue = 'So have you brought it?';
					break;
				case 1:
					character = 'Max';
					dialogue = 'Brought what?';
					break;
				case 2:
					character = '???';
					dialogue = 'The necklace.';
					break;
				case 3:
					character = 'Max';
					dialogue = 'I might have.';
					break;	
				case 4:
					character = '???';
					dialogue = 'Give it to me.';
					break;
				case 5:
					character = 'Max';
					dialogue = 'Why are you searching for this necklace?';
					break;	
				case 6:
					character = 'Max';
					dialogue = 'Why have you destroyed towns in the nearby lands in search of this necklace?';
					break;					
				case 10:
					character = 'Alice';
					dialogue = 'That necklace is from my mother.';
					break;
				case 11:
					character = 'Alice';
					dialogue = 'I have been searching for it ever since I lost it during my escape from this dreaded place.';
					break;	
				case 12:
					character = 'Alice';
					dialogue = 'They dragged me back here.';
					break;
				case 13:
					character = 'Alice';
					dialogue = 'and they made me the queen of this rotting kingdom.';
					break;	
				case 14:
					character = 'Max';
					dialogue = 'Sounds like you need a break.';
					break;	
				case 15:
					character = 'Max';
					dialogue = 'Here, have a kit-kat';
					break;	
				case 16:
					character = 'Alice';
					dialogue = "Ooooh thanks. I needed that. They don't sell that stuff here.";
					break;						
				case 17:
					$('#nextbutton, #textbox ').hide();	
					$('#talkbutton').show();
					break;	
			}
			progress++;  
			localStorage.setItem("DialogueProgress", progress);
			$('#textbox #span2').html(dialogue);	
			$('#textbox #span1').html(character);
		}
		$('#nextbutton').click(eventHandler);		
});

</script>

</head>
<body>
<div id="background">
		<div id="textbox">
			<span id='span1'></span>
			<span id='span2'></span>
		</div>
		<div id="nextbutton"><span>Continue</span></div>
</div>
</body>
</html>