<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MAS340</title>
<link href="" rel="stylesheet" />
<script src="jquery-3.3.1.min.js"></script>
<script src="jquery-ui.js"></script>
<script src="e-smart-hittest-jquery.js"></script>

<style type="text/css">

#tunnel {
	margin: auto;
	display:block;
}
#player {
	position: absolute;
}

</style>

<script>
$(document).ready(function() {

	$(document).keyup(moveCharacter);

	var change = {
		79: {left : '-=1'},
		80: {left : '+=1'},
		81: {top : '-=1'},
		65: {top : '+=1'}
	}
	var going;
	$(document).one('keydown',moveCharacter);
	function moveCharacter(e) {
		$(document).one('keyup', stopCharacter);
		var animation = change[e.which];
		going = setInterval(keepGoing,1);
		function keepGoing() {
			$('#player').css(animation);
		}
	}
	function stopCharacter() {
		clearInterval(going);
		$(document).one('keydown', moveCharacter);
	}

	function checkCollision() {
		//console.log('hellos')
		var hit = $('#player').objectHitTest({
					"object": $('#tunnel'),
					'transparency': true
					});
		console.log(hit);
		if(hit) {
			$('#player').hide({effect:'explode'})
			clearInterval(collisionTimer);
			setTimeout(resetPlayer,1000);
		}
	}
	function resetPlayer() {
		$('#player').css({
			top:10,
			left:10
		}).fadeIn();
		collisionTimer = setInterval(checkCollision, 50);
	}
	var collisionTimer = setInterval(checkCollision, 50);
})
</script>
</head>
<body>
<img src="player.png" id="player">
<img src="tunnel.png" id='tunnel'>
</body>
</html>